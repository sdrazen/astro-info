{"ast":null,"code":"import _classCallCheck from \"C:/Users/Fritz7x64/Documents/Angular/astro-info/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Fritz7x64/Documents/Angular/astro-info/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { FirebaseAuthService } from './shared/firebase.auth.service';\nimport { UserSettingsService } from './shared/user.settings.service';\nimport { TranslationsService } from './shared/translations.service';\nimport { IssService } from './shared/iss.service';\nimport { Router } from '@angular/router';\nimport { interval, map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shared/firebase.auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./shared/user.settings.service\";\nimport * as i4 from \"./shared/translations.service\";\nimport * as i5 from \"./shared/iss.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/google-maps\";\n\nfunction IssComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessageIss, \" \");\n  }\n}\n\nvar _c0 = function _c0(a0, a1) {\n  return {\n    lat: a0,\n    lng: a1\n  };\n};\n\nexport var IssComponent = /*#__PURE__*/(function () {\n  var IssComponent = /*#__PURE__*/function () {\n    function IssComponent(_firebaseAuthService, _router, _userSettingsService, _translationsService, _issService) {\n      _classCallCheck(this, IssComponent);\n\n      this._firebaseAuthService = _firebaseAuthService;\n      this._router = _router;\n      this._userSettingsService = _userSettingsService;\n      this._translationsService = _translationsService;\n      this._issService = _issService; // Variables for various error messages\n\n      this.errorMessageIss = \"\"; // Variables for iss service\n\n      this.lat = 0;\n      this.lng = 0;\n      this.altitude = 0;\n      this.velocity = 0;\n      this.timestamp = 0;\n      this.dateTime = \"\";\n      this.refreshPeriod = 5000;\n      this.refreshPeriodInSeconds = 5; // Variables for Google Maps\n\n      this.zoom = 2;\n      this.draggable = false;\n      this.iconUrl = \"assets/img/iss.ico\"; // Variables for translations\n\n      this.t_IssComponent_PanelTitle = \"Current ISS position\";\n      this.t_IssComponent_MapTitle = \"Current ISS position and data\";\n      this.t_IssComponent_Latitude = \"Latitude\";\n      this.t_IssComponent_Longitude = \"Longitude\";\n      this.t_IssComponent_Altitude = \"Altitude (km)\";\n      this.t_IssComponent_Velocity = \"Velocity (km/h)\";\n      this.t_IssComponent_DateTime = \"Date/Time\";\n      this.t_IssComponent_DataRefreshPeriod = \"Data refresh period (sec)\";\n      this.t_IssComponent_AlertTextPart1 = \"Data will be automatically updated every\";\n      this.t_IssComponent_AlertTextPart2 = \"seconds\";\n    }\n\n    _createClass(IssComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        //   var p = this._firebaseAuthService.listenForAuthStateChanges();\n        //   p.then(user => {\n        //     this.isLoggedIn = true;\n        //     this.currentUser = user;\n        //     // Initial observable subsription\n        //     this._issService.getCurrentIssPosition()\n        //         .subscribe(data => {\n        //             this.currentIssPosition$ = data;\n        //             this.lat = data.latitude;\n        //             this.lng = data.longitude;\n        //             this.altitude = Math.round(data.altitude);\n        //             this.velocity = Math.round(data.velocity);\n        //             this.timestamp = data.timestamp;\n        //             this.dateTime = this.convertTimestampToDateTime(this.timestamp);\n        //         }, (err) => this.errorMessageIss = err);\n        //     // Use data from iss service periodically\n        //     this.intervalObservableSubscription$ = IntervalObservable.create(this.refreshPeriod)\n        //         .switchMap(() => {\n        //             return this._issService.getCurrentIssPosition();\n        //         })\n        //         .subscribe(data => {\n        //             this.currentIssPosition$ = data;\n        //             this.lat = data.latitude;\n        //             this.lng = data.longitude;\n        //             this.altitude = Math.round(data.altitude);\n        //             this.velocity = Math.round(data.velocity);\n        //             this.timestamp = data.timestamp;\n        //             this.dateTime = this.convertTimestampToDateTime(this.timestamp);\n        //         }, (err) => this.errorMessageIss = err);\n        //     // Translations\n        //     this.translate();\n        //   })\n        //   .catch(value => {this.isLoggedIn = false; this._router.navigate (['/']);})\n        this.isLoggedIn = true; // this.currentUser = user;\n        // Initial observable subsription\n\n        this._issService.getCurrentIssPosition().subscribe(function (data) {\n          _this.lat = data.latitude;\n          _this.lng = data.longitude;\n          _this.altitude = Math.round(data.altitude);\n          _this.velocity = Math.round(data.velocity);\n          _this.timestamp = data.timestamp;\n          _this.dateTime = _this.convertTimestampToDateTime(_this.timestamp);\n        }, function (err) {\n          return _this.errorMessageIss = err;\n        }); // Use data from iss service periodically\n\n\n        this.intervalObservableSubscription$ = interval(this.refreshPeriod).pipe(map(function () {\n          _this._issService.getCurrentIssPosition().pipe(map(function (data) {\n            _this.lat = data.latitude;\n            _this.lng = data.longitude;\n            _this.altitude = Math.round(data.altitude);\n            _this.velocity = Math.round(data.velocity);\n            _this.timestamp = data.timestamp;\n            _this.dateTime = _this.convertTimestampToDateTime(_this.timestamp);\n          })).subscribe(function () {}, function (err) {\n            _this.errorMessageIss = err;\n          });\n        })).subscribe(function () {}, function (err) {\n          _this.errorMessageIss = err;\n        }); // Translations\n\n        this.translate();\n      }\n    }, {\n      key: \"convertTimestampToDateTime\",\n      value: function convertTimestampToDateTime(timestamp) {\n        var d = new Date(timestamp * 1000);\n        var yyyy = d.getFullYear();\n        var mm = ('0' + (d.getMonth() + 1)).slice(-2); // Months are zero based. Add leading 0.\n\n        var dd = ('0' + d.getDate()).slice(-2);\n        var hh = ('0' + d.getHours()).slice(-2);\n        var min = ('0' + d.getMinutes()).slice(-2);\n        var sec = ('0' + d.getSeconds()).slice(-2);\n        return yyyy.toString() + \"-\" + mm + \"-\" + dd + \" \" + hh + \":\" + min + \":\" + sec;\n      }\n    }, {\n      key: \"onRefreshPeriodInSecondsKeyUp\",\n      value: function onRefreshPeriodInSecondsKeyUp() {\n        var _this2 = this;\n\n        if (parseInt(this.refreshPeriodInSeconds.toString()) > 0) {\n          this.intervalObservableSubscription$.unsubscribe();\n          this.refreshPeriod = parseInt(this.refreshPeriodInSeconds.toString()) * 1000; // Use data from iss service periodically\n\n          this.intervalObservableSubscription$ = interval(this.refreshPeriod).pipe(map(function () {\n            _this2._issService.getCurrentIssPosition().pipe(map(function (data) {\n              _this2.lat = data.latitude;\n              _this2.lng = data.longitude;\n              _this2.altitude = Math.round(data.altitude);\n              _this2.velocity = Math.round(data.velocity);\n              _this2.timestamp = data.timestamp;\n              _this2.dateTime = _this2.convertTimestampToDateTime(_this2.timestamp);\n            })).subscribe(function () {}, function (err) {\n              _this2.errorMessageIss = err;\n            });\n          })).subscribe(function () {}, function (err) {\n            _this2.errorMessageIss = err;\n          });\n        }\n      }\n    }, {\n      key: \"translate\",\n      value: function translate() {\n        var _this3 = this;\n\n        if (this._translationsService.translationsSetToVariables === false) {\n          this._translationsService.setTranslationsForLanguage(this._userSettingsService.languageId).then(function () {\n            // Translations\n            _this3.t_IssComponent_PanelTitle = _this3._translationsService.t_IssComponent_PanelTitle;\n            _this3.t_IssComponent_MapTitle = _this3._translationsService.t_IssComponent_MapTitle;\n            _this3.t_IssComponent_Latitude = _this3._translationsService.t_IssComponent_Latitude;\n            _this3.t_IssComponent_Longitude = _this3._translationsService.t_IssComponent_Longitude;\n            _this3.t_IssComponent_Altitude = _this3._translationsService.t_IssComponent_Altitude;\n            _this3.t_IssComponent_Velocity = _this3._translationsService.t_IssComponent_Velocity;\n            _this3.t_IssComponent_DateTime = _this3._translationsService.t_IssComponent_DateTime;\n            _this3.t_IssComponent_DataRefreshPeriod = _this3._translationsService.t_IssComponent_DataRefreshPeriod;\n            _this3.t_IssComponent_AlertTextPart1 = _this3._translationsService.t_IssComponent_AlertTextPart1;\n            _this3.t_IssComponent_AlertTextPart2 = _this3._translationsService.t_IssComponent_AlertTextPart2;\n          });\n        } else {\n          // Translations\n          this.t_IssComponent_PanelTitle = this._translationsService.t_IssComponent_PanelTitle;\n          this.t_IssComponent_MapTitle = this._translationsService.t_IssComponent_MapTitle;\n          this.t_IssComponent_Latitude = this._translationsService.t_IssComponent_Latitude;\n          this.t_IssComponent_Longitude = this._translationsService.t_IssComponent_Longitude;\n          this.t_IssComponent_Altitude = this._translationsService.t_IssComponent_Altitude;\n          this.t_IssComponent_Velocity = this._translationsService.t_IssComponent_Velocity;\n          this.t_IssComponent_DateTime = this._translationsService.t_IssComponent_DateTime;\n          this.t_IssComponent_DataRefreshPeriod = this._translationsService.t_IssComponent_DataRefreshPeriod;\n          this.t_IssComponent_AlertTextPart1 = this._translationsService.t_IssComponent_AlertTextPart1;\n          this.t_IssComponent_AlertTextPart2 = this._translationsService.t_IssComponent_AlertTextPart2;\n        }\n      }\n    }]);\n\n    return IssComponent;\n  }();\n\n  IssComponent.ɵfac = function IssComponent_Factory(t) {\n    return new (t || IssComponent)(i0.ɵɵdirectiveInject(i1.FirebaseAuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserSettingsService), i0.ɵɵdirectiveInject(i4.TranslationsService), i0.ɵɵdirectiveInject(i5.IssService));\n  };\n\n  IssComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IssComponent,\n    selectors: [[\"app-iss\"]],\n    decls: 45,\n    vars: 29,\n    consts: [[1, \"card\", \"card-primary\", \"top-50\", \"panel-margin\"], [1, \"card-heading\"], [1, \"card-title\"], [1, \"card-body\"], [1, \"map\"], [1, \"row\"], [1, \"col-md-7\"], [\"width\", \"100%\", \"height\", \"720px\", 3, \"zoom\", \"center\"], [3, \"position\", \"draggable\", \"icon\"], [1, \"col-md-5\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"list-group\"], [1, \"list-group-item\"], [\"type\", \"text\", \"name\", \"refreshPeriodInSeconds\", 1, \"form-control\", \"margin-left-30\", \"width-120\", 3, \"ngModel\", \"keyup\", \"ngModelChange\"], [1, \"alert\", \"alert-info\"], [1, \"alert\", \"alert-danger\"]],\n    template: function IssComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"google-map\", 7);\n        i0.ɵɵelement(9, \"map-marker\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 9)(11, \"h3\");\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"br\");\n        i0.ɵɵtemplate(14, IssComponent_div_14_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementStart(15, \"ul\", 11)(16, \"li\", 12)(17, \"b\");\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"li\", 12)(21, \"b\");\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"li\", 12)(25, \"b\");\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"li\", 12)(29, \"b\");\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"li\", 12)(33, \"b\");\n        i0.ɵɵtext(34);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"br\");\n        i0.ɵɵelementStart(37, \"li\", 12)(38, \"b\");\n        i0.ɵɵtext(39);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"input\", 13);\n        i0.ɵɵlistener(\"keyup\", function IssComponent_Template_input_keyup_40_listener() {\n          return ctx.onRefreshPeriodInSecondsKeyUp();\n        })(\"ngModelChange\", function IssComponent_Template_input_ngModelChange_40_listener($event) {\n          return ctx.refreshPeriodInSeconds = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(41, \"br\");\n        i0.ɵɵelementStart(42, \"div\", 14);\n        i0.ɵɵtext(43);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"br\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.t_IssComponent_PanelTitle);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"zoom\", ctx.zoom)(\"center\", i0.ɵɵpureFunction2(23, _c0, ctx.lat, ctx.lng));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"position\", i0.ɵɵpureFunction2(26, _c0, ctx.lat, ctx.lng))(\"draggable\", ctx.draggable)(\"icon\", ctx.iconUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.t_IssComponent_MapTitle);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessageIss != \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"\", ctx.t_IssComponent_Latitude, \": \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\xA0\", ctx.lat, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.t_IssComponent_Longitude, \": \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\xA0\", ctx.lng, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.t_IssComponent_Altitude, \": \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\xA0\", ctx.altitude, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.t_IssComponent_Velocity, \": \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\xA0\", ctx.velocity, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.t_IssComponent_DateTime, \": \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\xA0\", ctx.dateTime, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"\", ctx.t_IssComponent_DataRefreshPeriod, \": \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.refreshPeriodInSeconds);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate3(\" \", ctx.t_IssComponent_AlertTextPart1, \" \", ctx.refreshPeriod / 1000, \" \", ctx.t_IssComponent_AlertTextPart2, \"... \");\n      }\n    },\n    dependencies: [i6.NgIf, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i8.GoogleMap, i8.MapMarker],\n    styles: [\".top-50[_ngcontent-%COMP%]{margin-top:50px}.panel-margin[_ngcontent-%COMP%]{margin-left:10px;margin-right:20px}.color-blue[_ngcontent-%COMP%]{color:#2577f5c4}.sebm-google-map-container[_ngcontent-%COMP%]{height:750px}.width-100[_ngcontent-%COMP%]{width:100px}.margin-left-30[_ngcontent-%COMP%]{margin-left:30px}.height-85[_ngcontent-%COMP%]{height:85px}.background-color-yellow[_ngcontent-%COMP%]{background-color:#ffc}.width-120[_ngcontent-%COMP%]{width:120px;display:inline-block}\"]\n  });\n  return IssComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}