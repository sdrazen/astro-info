{"ast":null,"code":"import _classCallCheck from \"C:/Users/Fritz7x64/Documents/Angular/astro-info/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Fritz7x64/Documents/Angular/astro-info/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { FirebaseAuthService } from './shared/firebase.auth.service';\nimport { UserSettingsService } from './shared/user.settings.service';\nimport { TranslationsService } from './shared/translations.service';\nimport { CalculationsService } from './shared/calculations.service';\nimport { Router } from '@angular/router';\n\nvar AltAzCalculatorComponent = /*#__PURE__*/function () {\n  function AltAzCalculatorComponent(_firebaseAuthService, _router, _userSettingsService, _translationsService, _calculationsService) {\n    _classCallCheck(this, AltAzCalculatorComponent);\n\n    this._firebaseAuthService = _firebaseAuthService;\n    this._router = _router;\n    this._userSettingsService = _userSettingsService;\n    this._translationsService = _translationsService;\n    this._calculationsService = _calculationsService;\n    this.rightAscension = \"\";\n    this.declination = \"\";\n    this.catalogueEntry = \"\";\n    this.familiarName = \"\";\n    this.backButtonClicked = new EventEmitter(); // Variables for user settings\n\n    this.lat = 0;\n    this.lng = 0;\n    this.ra = \"\";\n    this.dec = \"\";\n    this.timeUt = \"\";\n    this.timeUtYYYY = \"\";\n    this.timeUtMM = \"\";\n    this.timeUtDD = \"\";\n    this.timeUtHH = \"\";\n    this.timeUtMIN = \"\"; // Variables for Google Maps\n\n    this.zoom = 10;\n    this.draggable = true;\n    this.iconUrl = \"assets/img/user.png\";\n    this.showSettingsUpdatedAlert = false; // Variables for translations\n\n    this.t_AltAzCalculatorComponent_PanelTitle = \"Alt-Az calculator\";\n    this.t_AltAzCalculatorComponent_MapTitle = \"Define parameters to get object's alt-az position\";\n    this.t_AltAzCalculatorComponent_Latitude = \"Latitude\";\n    this.t_AltAzCalculatorComponent_Longitude = \"Longitude\";\n    this.t_AltAzCalculatorComponent_RA = \"RA (hh mm ss)\";\n    this.t_AltAzCalculatorComponent_DEC = \"DEC (deg mm ss)\";\n    this.t_AltAzCalculatorComponent_TimeUT = \"UT (yyyy-mm-dd hh:mm)\";\n    this.t_AltAzCalculatorComponent_ObjectsPosition = \"Object's position on the sky for chosen location and time\";\n    this.t_AltAzCalculatorComponent_Altitude = \"Altitude\";\n    this.t_AltAzCalculatorComponent_Azimuth = \"Azimuth\";\n    this.t_AltAzCalculatorComponent_Calculate = \"Calculate\";\n    this.t_AltAzCalculatorComponent_Back = \"Back\";\n    this.t_AltAzCalculatorComponent_AlertText = \"Data is automatically updated by changing any parameter (RA, DEC, UT or geolocation)\"; // CaclulationsService current position\n\n    this.altAz = [];\n    this.altDMS = [];\n    this.azDMS = [];\n  }\n\n  _createClass(AltAzCalculatorComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      //   var p = this._firebaseAuthService.listenForAuthStateChanges();\n      //   p.then(user => {\n      //     this.isLoggedIn = true;\n      //     this.currentUser = user;\n      //     let now = new Date();\n      //     let utc_now = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n      //     let dd = utc_now.getDate();\n      //     let mm = utc_now.getMonth() + 1;\n      //     let yyyy = utc_now.getFullYear();\n      //     let hh = utc_now.getHours();\n      //     let min = utc_now.getMinutes();\n      //     // Use user settings from service\n      //     this.lat = this._userSettingsService.lat;\n      //     this.lng = this._userSettingsService.lng;\n      //     this.ra = this.rightAscension ? this.rightAscension : \"00h 00' 00s\";\n      //     this.dec = this.declination ? this.declination : \"00° 00' 00s\";\n      //     this.timeUt = yyyy.toString() + \"-\" + this.leadingZero(mm.toString()) + \"-\" + this.leadingZero(dd.toString()) + \"T\" + this.leadingZero(hh.toString()) + \":\" + this.leadingZero(min.toString() + \":00\");\n      //     this.timeUtYYYY = this.leadingZero(yyyy.toString());\n      //     this.timeUtMM = this.leadingZero(mm.toString());\n      //     this.timeUtDD = this.leadingZero(dd.toString());\n      //     this.timeUtHH = this.leadingZero(hh.toString());\n      //     this.timeUtMIN = this.leadingZero(min.toString());\n      //     // Calculate object's position\n      //     this.getObjectsPosition();\n      //     // Translations\n      //     this.translate();\n      //     // Update panel title and object position title\n      //     this.t_AltAzCalculatorComponent_PanelTitle = this.t_AltAzCalculatorComponent_PanelTitle + (this.catalogueEntry ? \": \" + this.catalogueEntry : (this.familiarName ? \": \" + this.familiarName : \"\"));\n      //     this.t_AltAzCalculatorComponent_ObjectsPosition = (this.catalogueEntry ? this.catalogueEntry + \" - \" : (this.familiarName ? this.familiarName + \" - \" : \"\")) + this.t_AltAzCalculatorComponent_ObjectsPosition;\n      //   })\n      //   .catch(value => {this.isLoggedIn = false; this._router.navigate (['/']);})\n      this.isLoggedIn = true; // this.currentUser = user;\n\n      var now = new Date();\n      var utc_now = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n      var dd = utc_now.getDate();\n      var mm = utc_now.getMonth() + 1;\n      var yyyy = utc_now.getFullYear();\n      var hh = utc_now.getHours();\n      var min = utc_now.getMinutes(); // Use user settings from service\n\n      this.lat = this._userSettingsService.lat;\n      this.lng = this._userSettingsService.lng;\n      this.ra = this.rightAscension ? this.rightAscension : \"00h 00' 00s\";\n      this.dec = this.declination ? this.declination : \"00° 00' 00s\";\n      this.timeUt = yyyy.toString() + \"-\" + this.leadingZero(mm.toString()) + \"-\" + this.leadingZero(dd.toString()) + \"T\" + this.leadingZero(hh.toString()) + \":\" + this.leadingZero(min.toString() + \":00\");\n      this.timeUtYYYY = this.leadingZero(yyyy.toString());\n      this.timeUtMM = this.leadingZero(mm.toString());\n      this.timeUtDD = this.leadingZero(dd.toString());\n      this.timeUtHH = this.leadingZero(hh.toString());\n      this.timeUtMIN = this.leadingZero(min.toString()); // Calculate object's position\n\n      this.getObjectsPosition(); // Translations\n\n      this.translate(); // Update panel title and object position title\n\n      this.t_AltAzCalculatorComponent_PanelTitle = this.t_AltAzCalculatorComponent_PanelTitle + (this.catalogueEntry ? \": \" + this.catalogueEntry : this.familiarName ? \": \" + this.familiarName : \"\");\n      this.t_AltAzCalculatorComponent_ObjectsPosition = (this.catalogueEntry ? this.catalogueEntry + \" - \" : this.familiarName ? this.familiarName + \" - \" : \"\") + this.t_AltAzCalculatorComponent_ObjectsPosition;\n    }\n  }, {\n    key: \"onMapClick\",\n    value: function onMapClick($event) {\n      this.lat = $event.coords.lat;\n      this.lng = $event.coords.lng;\n      this.calculateTimeUt();\n      this.getObjectsPosition();\n    }\n  }, {\n    key: \"onMarkerDragEnd\",\n    value: function onMarkerDragEnd($event) {\n      this.lat = $event.coords.lat;\n      this.lng = $event.coords.lng;\n      this.calculateTimeUt();\n      this.getObjectsPosition();\n    }\n  }, {\n    key: \"leadingZero\",\n    value: function leadingZero(value) {\n      return parseInt(value) < 10 ? \"0\" + value : value;\n    }\n  }, {\n    key: \"onKeyUp\",\n    value: function onKeyUp() {\n      this.calculateTimeUt();\n      this.getObjectsPosition();\n    }\n  }, {\n    key: \"onCalculateClick\",\n    value: function onCalculateClick() {\n      this.calculateTimeUt();\n      this.getObjectsPosition();\n    }\n  }, {\n    key: \"onBackClick\",\n    value: function onBackClick() {\n      this.backButtonClicked.emit();\n    }\n  }, {\n    key: \"getObjectsPosition\",\n    value: function getObjectsPosition() {\n      var RA = this.ra.replace(\"h\", \"\").replace(\"'\", \"\").replace(\"s\", \"\").split(\" \");\n      var RA_H = parseInt(RA[0]);\n      var RA_M = parseInt(RA[1]);\n      var RA_S = parseInt(RA[2]);\n      var DEC = this.dec.replace(\"°\", \"\").replace(\"'\", \"\").replace(\"s\", \"\").split(\" \");\n      var DEC_D = parseInt(DEC[0]);\n      var DEC_M = parseInt(DEC[1]);\n      var DEC_S = parseInt(DEC[2]);\n      var LAT = this.lat;\n      var LON = this.lng;\n      var time_ut = new Date(this.timeUt);\n      var dd = time_ut.getDate();\n      var mm = time_ut.getMonth() + 1;\n      var yyyy = time_ut.getFullYear();\n      var hh = time_ut.getHours();\n      var min = time_ut.getMinutes();\n      this.altAz = this._calculationsService.getAltAz(this._calculationsService.convertToHours(RA_H, RA_M, RA_S), this._calculationsService.convertToDegreesDecimal(DEC_D, DEC_M, DEC_S), LAT, LON, yyyy, mm, dd, hh, min);\n      this.altDMS = this._calculationsService.convertDegreesDecimalToDegreesMinutesSeconds(this.altAz[0]);\n      this.azDMS = this._calculationsService.convertDegreesDecimalToDegreesMinutesSeconds(this.altAz[1]);\n    }\n  }, {\n    key: \"yearMinus\",\n    value: function yearMinus() {\n      this.timeUtYYYY = (parseInt(this.timeUtYYYY) - 1).toString();\n      this.calculateTimeUt();\n      this.getObjectsPosition();\n    }\n  }, {\n    key: \"yearPlus\",\n    value: function yearPlus() {\n      this.timeUtYYYY = (parseInt(this.timeUtYYYY) + 1).toString();\n      this.calculateTimeUt();\n      this.getObjectsPosition();\n    }\n  }, {\n    key: \"monthMinus\",\n    value: function monthMinus() {\n      if (parseInt(this.timeUtMM) > 1) {\n        this.timeUtMM = this.leadingZero((parseInt(this.timeUtMM) - 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"monthPlus\",\n    value: function monthPlus() {\n      if (parseInt(this.timeUtMM) < 12) {\n        this.timeUtMM = this.leadingZero((parseInt(this.timeUtMM) + 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"dayMinus\",\n    value: function dayMinus() {\n      if (parseInt(this.timeUtDD) > 1) {\n        this.timeUtDD = this.leadingZero((parseInt(this.timeUtDD) - 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"dayPlus\",\n    value: function dayPlus() {\n      if (parseInt(this.timeUtDD) < 31) {\n        this.timeUtDD = this.leadingZero((parseInt(this.timeUtDD) + 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"hourMinus\",\n    value: function hourMinus() {\n      if (parseInt(this.timeUtHH) > 1) {\n        this.timeUtHH = this.leadingZero((parseInt(this.timeUtHH) - 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"hourPlus\",\n    value: function hourPlus() {\n      if (parseInt(this.timeUtHH) < 23) {\n        this.timeUtHH = this.leadingZero((parseInt(this.timeUtHH) + 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"minuteMinus\",\n    value: function minuteMinus() {\n      if (parseInt(this.timeUtMIN) > 1) {\n        this.timeUtMIN = this.leadingZero((parseInt(this.timeUtMIN) - 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"minutePlus\",\n    value: function minutePlus() {\n      if (parseInt(this.timeUtMIN) < 59) {\n        this.timeUtMIN = this.leadingZero((parseInt(this.timeUtMIN) + 1).toString());\n        this.calculateTimeUt();\n        this.getObjectsPosition();\n      }\n    }\n  }, {\n    key: \"calculateTimeUt\",\n    value: function calculateTimeUt() {\n      this.timeUt = this.timeUtYYYY + \"-\" + this.leadingZero(parseInt(this.timeUtMM.toString()).toString()) + \"-\" + this.leadingZero(parseInt(this.timeUtDD.toString()).toString()) + \"T\" + this.leadingZero(parseInt(this.timeUtHH.toString()).toString()) + \":\" + this.leadingZero(parseInt(this.timeUtMIN.toString()).toString() + \":00\");\n    }\n  }, {\n    key: \"translate\",\n    value: function translate() {\n      var _this = this;\n\n      if (this._translationsService.translationsSetToVariables === false) {\n        this._translationsService.setTranslationsForLanguage(this._userSettingsService.languageId).then(function () {\n          _this.t_AltAzCalculatorComponent_PanelTitle = _this._translationsService.t_AltAzCalculatorComponent_PanelTitle;\n          _this.t_AltAzCalculatorComponent_MapTitle = _this._translationsService.t_AltAzCalculatorComponent_MapTitle;\n          _this.t_AltAzCalculatorComponent_Latitude = _this._translationsService.t_AltAzCalculatorComponent_Latitude;\n          _this.t_AltAzCalculatorComponent_Longitude = _this._translationsService.t_AltAzCalculatorComponent_Longitude;\n          _this.t_AltAzCalculatorComponent_RA = _this._translationsService.t_AltAzCalculatorComponent_RA;\n          _this.t_AltAzCalculatorComponent_DEC = _this._translationsService.t_AltAzCalculatorComponent_DEC;\n          _this.t_AltAzCalculatorComponent_TimeUT = _this._translationsService.t_AltAzCalculatorComponent_TimeUT;\n          _this.t_AltAzCalculatorComponent_ObjectsPosition = _this._translationsService.t_AltAzCalculatorComponent_ObjectsPosition;\n          _this.t_AltAzCalculatorComponent_Altitude = _this._translationsService.t_AltAzCalculatorComponent_Altitude;\n          _this.t_AltAzCalculatorComponent_Azimuth = _this._translationsService.t_AltAzCalculatorComponent_Azimuth;\n          _this.t_AltAzCalculatorComponent_Calculate = _this._translationsService.t_AltAzCalculatorComponent_Calculate;\n          _this.t_AltAzCalculatorComponent_Back = _this._translationsService.t_AltAzCalculatorComponent_Back;\n          _this.t_AltAzCalculatorComponent_AlertText = _this._translationsService.t_AltAzCalculatorComponent_AlertText;\n        });\n      } else {\n        this.t_AltAzCalculatorComponent_PanelTitle = this._translationsService.t_AltAzCalculatorComponent_PanelTitle;\n        this.t_AltAzCalculatorComponent_MapTitle = this._translationsService.t_AltAzCalculatorComponent_MapTitle;\n        this.t_AltAzCalculatorComponent_Latitude = this._translationsService.t_AltAzCalculatorComponent_Latitude;\n        this.t_AltAzCalculatorComponent_Longitude = this._translationsService.t_AltAzCalculatorComponent_Longitude;\n        this.t_AltAzCalculatorComponent_RA = this._translationsService.t_AltAzCalculatorComponent_RA;\n        this.t_AltAzCalculatorComponent_DEC = this._translationsService.t_AltAzCalculatorComponent_DEC;\n        this.t_AltAzCalculatorComponent_TimeUT = this._translationsService.t_AltAzCalculatorComponent_TimeUT;\n        this.t_AltAzCalculatorComponent_ObjectsPosition = this._translationsService.t_AltAzCalculatorComponent_ObjectsPosition;\n        this.t_AltAzCalculatorComponent_Altitude = this._translationsService.t_AltAzCalculatorComponent_Altitude;\n        this.t_AltAzCalculatorComponent_Azimuth = this._translationsService.t_AltAzCalculatorComponent_Azimuth;\n        this.t_AltAzCalculatorComponent_Calculate = this._translationsService.t_AltAzCalculatorComponent_Calculate;\n        this.t_AltAzCalculatorComponent_Back = this._translationsService.t_AltAzCalculatorComponent_Back;\n        this.t_AltAzCalculatorComponent_AlertText = this._translationsService.t_AltAzCalculatorComponent_AlertText;\n      }\n    }\n  }]);\n\n  return AltAzCalculatorComponent;\n}();\n\n__decorate([Input(), __metadata(\"design:type\", String)], AltAzCalculatorComponent.prototype, \"rightAscension\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], AltAzCalculatorComponent.prototype, \"declination\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], AltAzCalculatorComponent.prototype, \"catalogueEntry\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], AltAzCalculatorComponent.prototype, \"familiarName\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", Object)], AltAzCalculatorComponent.prototype, \"backButtonClicked\", void 0);\n\nAltAzCalculatorComponent = __decorate([Component({\n  selector: 'app-altazcalculator',\n  templateUrl: './altaz.calculator.component.html',\n  styleUrls: ['./altaz.calculator.component.css']\n}), __metadata(\"design:paramtypes\", [FirebaseAuthService, Router, UserSettingsService, TranslationsService, CalculationsService])], AltAzCalculatorComponent);\nexport { AltAzCalculatorComponent };","map":null,"metadata":{},"sourceType":"module"}